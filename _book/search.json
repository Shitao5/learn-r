[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Learn-R",
    "section": "",
    "text": "License\n\næœ¬ä¹¦ä½œä¸ºæ•´ä½“åœ¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯è¯ä¸‹æˆæƒã€‚\næœ¬ä¹¦åŒ…å«çš„ä»£ç åœ¨MIT è®¸å¯è¯ä¸‹æä¾›ï¼›è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨å¼•ç”¨æ¥æºçš„æƒ…å†µä¸‹è‡ªç”±ä½¿ç”¨ã€‚\n\n\n\n\nWickham, Hadley, and Garrett Grolemund. 2017. R for Data Science. Oâ€™Reilly Media."
  },
  {
    "objectID": "preface.html",
    "href": "preface.html",
    "title": "Preface",
    "section": "",
    "text": "æœ¬ä¹¦å†…å®¹åŒ…æ‹¬æ•°æ®å¯è§†åŒ–ã€é‡‘èã€‚"
  },
  {
    "objectID": "Visualisation.html",
    "href": "Visualisation.html",
    "title": "Visualisation",
    "section": "",
    "text": "å„ä½çœ‹å®¢ï¼š\n\n\n\nLearn-R ä»åœ¨å†™ä½œæµç¨‹ä¸­ã€‚æœ¬ç« èŠ‚æ­£åœ¨è¿›è¡Œå†™ä½œå’Œç»“æ„è°ƒæ•´ï¼Œå¯èƒ½å‡ºç°æ··ä¹±æˆ–ä¸å®Œæ•´çš„æƒ…å†µã€‚"
  },
  {
    "objectID": "Visualisation.html#ggplot2",
    "href": "Visualisation.html#ggplot2",
    "title": "Visualisation",
    "section": "ggplot2",
    "text": "ggplot2\nggplot2(Wickham 2016)å…·æœ‰åº•å±‚çš„å›¾å½¢è¯­æ³•ï¼Œggplot2: Elegant Graphics for Data Analysisé‡ç‚¹è§£é‡Šäº†è¿™å¥—è¯­æ³•ï¼ŒChapterÂ 1ã€ChapterÂ 2ã€ChapterÂ 3 ä¸ºå…¶å­¦ä¹ ç¬”è®°ã€‚\nggplot2å…·æœ‰é¢œè‰²ï¼ˆcolorï¼‰ã€å¤§å°ï¼ˆsizeï¼‰ã€å½¢çŠ¶ï¼ˆshapeï¼‰ã€å¡«å……ï¼ˆfillï¼‰ç­‰ç¾å­¦å±æ€§ï¼Œé€‚ç”¨äºä¸åŒç±»å‹çš„å›¾å½¢ã€‚"
  },
  {
    "objectID": "Visualisation.html#echarts",
    "href": "Visualisation.html#echarts",
    "title": "Visualisation",
    "section": "echarts",
    "text": "echarts\nechartsæ˜¯ä¸€æ¬¾å¼€æºçš„JavaScriptå¯è§†åŒ–åº“ï¼Œå…¶åœ¨å¯äº¤äº’å›¾å½¢çš„ç»˜åˆ¶ä¸Šå…·æœ‰å¾ˆå¼ºçš„çµæ´»æ€§ã€‚echarts4råŒ…(Coene 2022)æ˜¯åˆ©ç”¨Ræ“ä½œechartsè¿›è¡Œç»˜å›¾çš„å·¥å…·åŒ…ã€‚\nå…³äºJavaScriptçš„ä½¿ç”¨ï¼Œè¿˜éœ€é˜…è¯»ä¸€ä¸‹JavaScript for Rï¼Œåˆ—å…¥ä¿ºçš„TODOğŸ¢ã€‚\n\n\n\n\nCoene, John. 2022. â€œEcharts4r: Create Interactive Graphs with â€™Echarts JavaScriptâ€™ Version 5.â€ https://CRAN.R-project.org/package=echarts4r.\n\n\nWickham, Hadley. 2016. â€œGgplot2: Elegant Graphics for Data Analysis.â€ https://ggplot2.tidyverse.org."
  },
  {
    "objectID": "vis-ggplot2-layers.html",
    "href": "vis-ggplot2-layers.html",
    "title": "1Â  ggplot2-layers",
    "section": "",
    "text": "å„ä½çœ‹å®¢ï¼š\n\n\n\nLearn-R ä»åœ¨å†™ä½œæµç¨‹ä¸­ã€‚æœ¬ç« èŠ‚ç›®å‰æ­£åœ¨è¿›è¡Œæ¶¦è‰²ï¼ŒåŸºæœ¬æ˜¯å¯è¯»çš„ã€‚\nåœ¨ç»˜å›¾ç¾å­¦ä¸­ï¼Œå°‘å³æ˜¯å¤šï¼Œä½¿ç”¨ç¾å­¦æ˜ å°„éœ€è¦èŠ‚åˆ¶ã€‚ä¸å…¶ç”¨ä¸€å¹…éå¸¸å¤æ‚çš„å›¾å½¢ä¸€æ¬¡å±•ç¤ºæ‰€æœ‰ï¼Œä¸å¦‚åˆ›é€ ä¸€äº›ç®€å•çš„æƒ…èŠ‚ï¼Œè®²è¿°ä¸€ä¸ªæ•…äº‹ï¼Œè®©è¯»è€…çš„è®¤è¯†ä»æ— åˆ°æœ‰ã€‚\nggplot2çš„åˆ†å±‚ç»“æ„1ä½¿å¾—æˆ‘ä»¬å¯ä»¥ä»¥ç»“æ„åŒ–çš„æ–¹å¼è®¾è®¡å’Œæ„å»ºå›¾å½¢ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå›¾å±‚æœ‰ä¸‰ä¸ªåŠŸèƒ½ï¼š"
  },
  {
    "objectID": "vis-ggplot2-layers.html#åŸºæœ¬å›¾å½¢",
    "href": "vis-ggplot2-layers.html#åŸºæœ¬å›¾å½¢",
    "title": "1Â  ggplot2-layers",
    "section": "\n1.1 åŸºæœ¬å›¾å½¢",
    "text": "1.1 åŸºæœ¬å›¾å½¢\n\ndf <- data.frame(\n  x = c(3, 1, 5),\n  y = c(2, 4, 6),\n  label = c(\"a\", \"b\", \"c\")\n)\n\np <- ggplot(df, aes(x, y, label = label)) +\n  labs(x = NULL, y = NULL) +\n  theme(plot.title = element_text(size = 12))\n\np + geom_point() + ggtitle(\"point\")\np + geom_text() + ggtitle(\"text\")\np + geom_bar(stat = \"identity\") + ggtitle(\"bar\")\np + geom_tile() + ggtitle(\"raster\")\n\np + geom_line() + ggtitle(\"line\")\np + geom_area() + ggtitle(\"area\")\np + geom_path() + ggtitle(\"path\")\np + geom_polygon() + ggtitle(\"polygon\")"
  },
  {
    "objectID": "vis-ggplot2-layers.html#æ­ç¤ºä¸ç¡®å®šæ€§",
    "href": "vis-ggplot2-layers.html#æ­ç¤ºä¸ç¡®å®šæ€§",
    "title": "1Â  ggplot2-layers",
    "section": "\n1.2 æ­ç¤ºä¸ç¡®å®šæ€§",
    "text": "1.2 æ­ç¤ºä¸ç¡®å®šæ€§\næ ¹æ®xè½´æ˜¯å¦è¿ç»­å’Œæ˜¯å¦å±•ç¤ºä¸­é—´å€¼ï¼Œæ¯”è¾ƒåŸºæœ¬çš„æœ‰ï¼š\n\ndf <- data.frame(x = 1:3,\n                 y = c(18, 11, 16),\n                 se = c(1.2, .5, 1.0))\n\nbase <- ggplot(df, aes(x, y,\n                       ymin = y - se,\n                       ymax = y + se))\nbase + geom_crossbar()\nbase + geom_pointrange()\nbase + geom_smooth(stat = \"identity\")\n\nbase + geom_errorbar()\nbase + geom_linerange()\nbase + geom_ribbon()"
  },
  {
    "objectID": "vis-ggplot2-layers.html#æƒé‡æ•°æ®",
    "href": "vis-ggplot2-layers.html#æƒé‡æ•°æ®",
    "title": "1Â  ggplot2-layers",
    "section": "\n1.3 æƒé‡æ•°æ®",
    "text": "1.3 æƒé‡æ•°æ®\næ±‡æ€»æ•°æ®çš„æ¯ä¸€è¡Œä»£è¡¨å¤šä¸ªè§‚æµ‹å€¼ï¼Œå› æ­¤éœ€è¦è€ƒè™‘æƒé‡å˜é‡ã€‚æƒé‡å˜é‡çš„é€‰æ‹©å°†å½±å“ç»˜å›¾å’Œå¾—å‡ºçš„ç»“è®ºã€‚\nå¯¹äºç‚¹å›¾ã€çº¿å›¾ç­‰ç®€å•å›¾å½¢ï¼Œä½¿ç”¨å¤§å°ï¼ˆsizeï¼‰ç¾å­¦ã€‚\n\n# Unweighted\nggplot(midwest, aes(percwhite, percbelowpoverty)) +\n  geom_point()\n\n# Weighted by population\nggplot(midwest, aes(percwhite, percbelowpoverty)) +\n  geom_point(aes(size = poptotal / 1e6)) +\n  scale_size_area(\"Population\\n(millions)\",\n                  breaks = c(.5, 1, 2, 4))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå¯¹äºæ¶‰åŠç»Ÿè®¡è½¬æ¢ç­‰å¤æ‚å›¾å½¢ï¼Œä½¿ç”¨weightç¾å­¦æŒ‡å®šæƒé‡ã€‚æƒé‡æ”¯æŒå¹³æ»‘ã€é‡åŒ–å›å½’ã€ç®±å‹å›¾ã€ç›´æ–¹å›¾ã€å¯†åº¦å›¾ç­‰æƒ…å½¢ã€‚æˆ‘ä»¬æ— æ³•ç›´æ¥ä»å›¾ä¸­çœ‹å‡ºæƒé‡å˜é‡ï¼Œå®ƒä¹Ÿä¸ä¼šäº§ç”Ÿå›¾ä¾‹ï¼Œä½†ä¼šæ”¹å˜ç»Ÿè®¡æ±‡æ€»çš„ç»“æœã€‚\n\n# Unweighted\nggplot(midwest, aes(percwhite, percbelowpoverty)) +\n  geom_point() +\n  geom_smooth(method = lm, size = 1)\n\n# Weighted by population\nggplot(midwest, aes(percwhite, percbelowpoverty)) +\n  geom_point(aes(size = poptotal / 1e6)) +\n  geom_smooth(aes(weight = poptotal), method = lm, size = 1) +\n  scale_size_area(guide = \"none\")"
  },
  {
    "objectID": "vis-ggplot2-layers.html#åœ°å›¾",
    "href": "vis-ggplot2-layers.html#åœ°å›¾",
    "title": "1Â  ggplot2-layers",
    "section": "\n1.4 åœ°å›¾",
    "text": "1.4 åœ°å›¾\n\n\n\n\n\n\nNote\n\n\n\nè¿™é‡Œéƒ¨åˆ†å†…å®¹ä¸ç”šç†Ÿæ‚‰ï¼Œå› æ­¤æœ‰å¤§æ®µçš„åŸæ–‡ç¿»è¯‘ã€‚\n\n\nç»˜åˆ¶åœ°ç†ç©ºé—´æ•°æ®æ˜¯ä¸€é¡¹å¸¸è§çš„å¯è§†åŒ–ä»»åŠ¡ï¼Œå®ƒéœ€è¦ä¸“é—¨çš„å·¥ä½œã€‚é€šå¸¸æ¥è®²ï¼Œå¯ä»¥æŠŠä»»åŠ¡åˆ†æˆä¸¤æ­¥ï¼š\n\nä½¿ç”¨æ•°æ®æºç»˜åˆ¶åœ°å›¾ï¼›\nä»ä¿¡æ¯æºæ·»åŠ å…ƒæ•°æ®åˆ°åœ°å›¾ä¸Šã€‚\n\nRè¯­è¨€å†…ç½®äº†åœ°å›¾åŒ…ï¼Œè™½ç„¶ä¸æ˜¯æœ€æ–°çš„ï¼Œä½†æ˜¯ä¸€ä¸ªå¥½çš„èµ·ç‚¹ã€‚è¿™é‡Œä»ä¸­æå–å¯†æ­‡æ ¹å·çš„å¿ç•Œï¼š\n\nlibrary(tidyverse) # ç”¨äºæ•°æ®å¤„ç†\nmi_counties <- map_data(\"county\", \"michigan\") %>% \n  select(lon = long, lat, group, id = subregion)\nhead(mi_counties)\n#>     lon  lat group     id\n#> 1 -83.9 44.9     1 alcona\n#> 2 -83.4 44.9     1 alcona\n#> 3 -83.4 44.9     1 alcona\n#> 4 -83.3 44.8     1 alcona\n#> 5 -83.3 44.8     1 alcona\n#> 6 -83.3 44.8     1 alcona\n\nåˆ©ç”¨æ•£ç‚¹å›¾å¯ä»¥çœ‹åˆ°æ•°æ®é›†ä¸­æ¯ä¸ªå¿çš„è§’è½ï¼Œé€šè¿‡geom_polygon()å°†æ•£ç‚¹å›¾ç»˜åˆ¶æˆåœ°å›¾ï¼š\n\nggplot(mi_counties, aes(lon, lat)) +\n  geom_point(size = .25, show.legend = FALSE) +\n  coord_quickmap()\n\nggplot(mi_counties, aes(lon, lat, group = group)) +\n  geom_polygon(fill = \"white\", color = \"grey50\") +\n  coord_quickmap()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncoord_quickmap()è°ƒæ•´åæ ‡è½´ï¼Œä»¥ç¡®ä¿ç»åº¦å’Œçº¬åº¦åœ¨åŒä¸€æ¯”ä¾‹ä¸Šå‘ˆç°ã€‚ä½†åœ°ç†ç©ºé—´æ•°æ®å¾€å¾€éœ€è¦æ›´ç²¾å‡†çš„æ–¹æ³•ï¼Œå› æ­¤ggplot2æä¾›äº†geom_sf()å’Œcoord_sf()æ¥å¤„ç†ç®€å•ç‰¹å¾æ ¼å¼çš„ç©ºé—´æ•°æ®ã€‚\n\n1.4.1 Simple feature maps\nä¸Šè¿°æ–¹æ³•å…·æœ‰å±€é™æ€§ï¼Œæœ€å…¸å‹çš„æ˜¯ï¼šç°å®ä¸–ç•Œçš„åœ°å›¾ä¸æ˜¯ç®€å•åœ°æŒ‰ç…§â€ç»åº¦-çº¬åº¦â€çš„æ•°æ®æ ¼å¼ç»˜åˆ¶çš„ã€‚ åœ°å›¾çš„çŸ¢é‡æ•°æ®é€šå¸¸ä½¿ç”¨ç”±å¼€æ”¾åœ°ç†ç©ºé—´è”ç›Ÿåˆ¶å®šçš„â€ç®€å•ç‰¹å¾â€ï¼ˆsimple featuresï¼‰æ ‡å‡†è¿›è¡Œç¼–ç ã€‚ sfåŒ…(Pebesma 2018)ä¸ºå¤„ç†è¿™ç±»æ•°æ®æä¾›äº†ä¼˜è´¨çš„å·¥å…·é›†ï¼Œggplot2ä¸­çš„geom_sf()å’Œcoord_sf()å‡½æ•°å°±æ˜¯ä¸ºä¸sfåŒ…ä¸€èµ·å·¥ä½œè€Œè®¾è®¡çš„ã€‚\n\nlibrary(ozmaps) # æä¾›æ¾³å¤§åˆ©äºšçš„åœ°å›¾æ•°æ®\nlibrary(sf)\n#> Linking to GEOS 3.9.1, GDAL 3.4.3, PROJ 7.2.1; sf_use_s2() is TRUE\n\nozmap_states\n#> Simple feature collection with 9 features and 1 field\n#> Geometry type: MULTIPOLYGON\n#> Dimension:     XY\n#> Bounding box:  xmin: 106 ymin: -43.6 xmax: 168 ymax: -9.23\n#> Geodetic CRS:  GDA94\n#> # A tibble: 9 Ã— 2\n#>   NAME                                                      geometry\n#> * <chr>                                           <MULTIPOLYGON [Â°]>\n#> 1 New South Wales              (((151 -35.1, 151 -35.1, 151 -35.1, â€¦\n#> 2 Victoria                     (((147 -38.7, 147 -38.7, 147 -38.7, â€¦\n#> 3 Queensland                   (((149 -20.3, 149 -20.4, 149 -20.4, â€¦\n#> 4 South Australia              (((137 -34.5, 137 -34.5, 137 -34.5, â€¦\n#> 5 Western Australia            (((126 -14, 126 -14, 126 -14, 126 -1â€¦\n#> 6 Tasmania                     (((148 -40.3, 148 -40.3, 148 -40.3, â€¦\n#> 7 Northern Territory           (((136 -13.8, 136 -13.8, 136 -13.8, â€¦\n#> 8 Australian Capital Territory (((149 -35.2, 149 -35.2, 149 -35.3, â€¦\n#> 9 Other Territories            (((168 -29.1, 168 -29, 168 -29, 168 â€¦\n\nsfæ•°æ®çš„ä¸€ä¸ªä¼˜åŠ¿ï¼Œåœ¨äºæˆ‘ä»¬å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°æ•°æ®çš„æ•´ä½“ç»“æ„ã€‚æ¾³å¤§åˆ©äºšç”±6ä¸ªå·å’Œä¸€äº›åœ°åŒºç»„æˆï¼Œå…±9ä¸ªåœ°ç†å•å…ƒï¼Œå› æ­¤æ•°æ®ä¸­æœ‰9è¡Œã€‚geometryåˆ—çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå¤šè¾¹å½¢å¯¹è±¡ï¼ŒæŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªå¤šè¾¹å½¢é¡¶ç‚¹ï¼Œæ ‡ç¤ºç€ä¸€ä¸ªåœ°åŒºçš„è¾¹ç•Œã€‚\nå¯¹äºè¿™ç§æ ¼å¼çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨geom_sf()å’Œcoord_sf()ç»˜åˆ¶ä¸€å¼ å¯ç”¨çš„åœ°å›¾è€Œä¸éœ€è¦åˆ¶å®šä»»ä½•å‚æ•°ï¼Œç”šè‡³ä¸éœ€è¦æ˜ç¡®ç¾å­¦ã€‚\n\nggplot(ozmap_states) +\n  geom_sf() +\n  coord_sf()\n\n\n\n\n\n\n\ngeom_sf()ä½¿ç”¨ggplot2ä¸­å…¶ä»–åœ°æ–¹æ²¡æœ‰ä½¿ç”¨çš„geometryç¾å­¦ï¼Œè¿™ç§ç¾å­¦å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼ä¹‹ä¸€æ¥åˆ¶å®šã€‚\n\nç”¨æˆ·æ— éœ€ä»»ä½•æ“ä½œï¼Œgeom_sf()è‡ªåŠ¨å°†åä¸ºgeometryçš„åˆ—æ˜ å°„åˆ°åœ°å›¾ä¸­ã€‚\nå¦‚æœæ•°æ®æ˜¯ä¸€ä¸ªsfå¯¹è±¡ï¼Œgeom_sf()è‡ªåŠ¨æ£€æµ‹geometryæ ¼å¼çš„åˆ—ï¼Œå³ä½¿è¯¥åˆ—åä¸ä¸ºgeometryã€‚\nä½¿ç”¨aes(geometry = my_column)æ‰‹åŠ¨æŒ‡å®šæ˜ å°„ï¼Œåœ¨æ•°æ®ä¸­æœ‰å¤šä¸ªgeometryæ ¼å¼çš„åˆ—æ—¶å¾ˆæœ‰ç”¨ã€‚\n\nggplot2æ”¯æŒå¤šå±‚geom_sf()å åŠ ã€‚ä½¿ç”¨rmapshaperåŒ…(Teucher and Russell 2022)ç®€åŒ–è¾¹ç•Œï¼Œä»¥å‡å°‘æ¸²æŸ“ç»˜å›¾çš„æ—¶é—´ã€‚å½“åŸå§‹æ•°æ®é›†ï¼ˆæœ¬ä¾‹ä¸­ä¸ºabs_cedï¼‰çš„å­˜å‚¨åˆ†è¾¨ç‡é«˜äºç»˜å›¾è¦æ±‚æ—¶ï¼Œè¿™é€šå¸¸æ˜¯ä¸ªå¥½ä¸»æ„ã€‚\n\noz_states <- ozmap_states %>% filter(NAME != \"Other Territories\")\noz_votes <- rmapshaper::ms_simplify(abs_ced)\n#> Registered S3 method overwritten by 'geojsonlint':\n#>   method         from \n#>   print.location dplyr\n\nggplot() +\n  geom_sf(data = oz_states, mapping = aes(fill = NAME), show.legend = FALSE) +\n  geom_sf(data = oz_votes, fill = NA) +\n  coord_sf()\n\n\n\n\n\n\n\nå›¾ä¸Šæ·»åŠ æ ‡ç­¾ï¼š\n\nsydney_map <- abs_ced %>% filter(NAME %in% c(\n  \"Sydney\", \"Wentworth\", \"Warringah\", \"Kingsford Smith\", \"Grayndler\", \"Lowe\", \n  \"North Sydney\", \"Barton\", \"Bradfield\", \"Banks\", \"Blaxland\", \"Reid\", \n  \"Watson\", \"Fowler\", \"Werriwa\", \"Prospect\", \"Parramatta\", \"Bennelong\", \n  \"Mackellar\", \"Greenway\", \"Mitchell\", \"Chifley\", \"McMahon\"\n))\n\nggplot(sydney_map) +\n  geom_sf(aes(fill = NAME), show.legend = FALSE) +\n  coord_sf(xlim = c(150.97, 151.3), ylim = c(-33.98, -33.79)) +\n  geom_sf_label(aes(label = NAME), label.padding = unit(1, \"mm\"))\n#> Warning in st_point_on_surface.sfc(sf::st_zm(x)):\n#> st_point_on_surface may not give correct results for\n#> longitude/latitude data\n\n\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\ngeom_sf_label()å‡½æ•°å†…éƒ¨ä½¿ç”¨sfåŒ…ä¸­çš„å‡½æ•°st_point_on_surface()æ¥æ”¾ç½®æ ‡ç­¾ï¼Œå‡ºç°ä¸Šè¿°è­¦å‘Šæ˜¯å› ä¸ºsfç”¨äºè®¡ç®—å‡ ä½•é‡ï¼ˆä¾‹å¦‚ä¸­å¿ƒç‚¹ã€å†…éƒ¨ç‚¹ï¼‰çš„å¤§å¤šæ•°ç®—æ³•éƒ½æ˜¯åŸºäºè¿™æ ·ä¸€ä¸ªå‡è®¾ï¼šç‚¹ä½äºä¸€ä¸ªå¹³å¦çš„äºŒç»´è¡¨é¢ä¸Šï¼Œå¹¶ä»¥ç¬›å¡å°”åæ ‡ä½œä¸ºå‚æ•°ã€‚è¿™ç§å‡è®¾å¹¶ä¸ä¸¥æ ¼ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚ï¼Œé è¿‘ä¸¤æçš„åœ°åŒºï¼‰ï¼Œä»¥è¿™ç§æ–¹å¼å¤„ç†ç»åº¦å’Œçº¬åº¦çš„è®¡ç®—ä¼šå¾—åˆ°é”™è¯¯çš„ç­”æ¡ˆã€‚å› æ­¤ï¼Œsfè½¯ä»¶åŒ…åœ¨ä¾èµ–è¿™ç§è¿‘ä¼¼æ–¹å¼è¿›è¡Œè®¡ç®—æ—¶å°†äº§ç”Ÿè­¦å‘Šã€‚\n\n\næ·»åŠ å…¶ä»–å›¾å±‚ï¼š\n\noz_capitals <- tibble::tribble( \n  ~city,           ~lat,     ~lon,\n  \"Sydney\",    -33.8688, 151.2093,  \n  \"Melbourne\", -37.8136, 144.9631, \n  \"Brisbane\",  -27.4698, 153.0251, \n  \"Adelaide\",  -34.9285, 138.6007, \n  \"Perth\",     -31.9505, 115.8605, \n  \"Hobart\",    -42.8821, 147.3272, \n  \"Canberra\",  -35.2809, 149.1300, \n  \"Darwin\",    -12.4634, 130.8456, \n)\n\nggplot() + \n  geom_sf(data = oz_votes) + \n  geom_sf(data = oz_states, colour = \"black\", fill = NA) + \n  geom_point(data = oz_capitals, mapping = aes(x = lon, y = lat), colour = \"red\") + \n  coord_sf()\n\n\n\n\n\n\n\n\n1.4.2 åœ°å›¾æŠ•å½±\nå¦‚æœå…³æ³¨åœ°å›¾çš„å‡†ç¡®æ€§ï¼Œåˆ©ç”¨ç»çº¬åº¦åœ¨ç¬›å¡å°”å¹³é¢ä¸Šè¿›è¡Œç»˜åˆ¶å¹¶éæœ€ä½³åŠæ³•ï¼Œè‡³å°‘å­˜åœ¨ä¸¤ä¸ªåŸºæœ¬é—®é¢˜ï¼š\n\nåœ°çƒæ—¢ä¸æ˜¯ä¸€ä¸ªå¹³é¢ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªå®Œç¾çš„çƒä½“ã€‚å…³äºåœ°çƒå½¢çŠ¶çš„ä¸€ç³»åˆ—å‡è®¾è¢«ç§°ä¸ºå¤§åœ°åŸºå‡†ï¼Œè™½ç„¶å®ƒå¯¹æŸäº›æ•°æ®çš„å¯è§†åŒ–å¯èƒ½å¹¶ä¸é‡è¦ï¼Œä½†å¯¹å…¶ä»–æ•°æ®æ¥è¯´ï¼Œå®ƒæ˜¯è‡³å…³é‡è¦çš„ã€‚æœ‰å‡ ç§ä¸åŒçš„é€‰æ‹©å¯ä»¥è€ƒè™‘ï¼šå¦‚æœé‡ç‚¹æ˜¯åŒ—ç¾ï¼Œâ€œåŒ—ç¾åŸºå‡†â€ï¼ˆNAD83ï¼‰æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼›å¦‚æœè§†è§’æ˜¯å…¨çƒï¼Œâ€œä¸–ç•Œå¤§åœ°æµ‹é‡ç³»ç»Ÿâ€ï¼ˆWGS84ï¼‰å¯èƒ½æ›´å¥½ã€‚\nåœ°å›¾çš„å½¢çŠ¶ã€‚åœ°çƒè¿‘ä¼¼æ¤­åœ†ä½“ï¼Œä½†å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç©ºé—´æ•°æ®éœ€è¦ç»˜åˆ¶åœ¨ä¸€ä¸ªäºŒç»´å¹³é¢ä¸Šã€‚ä¸å¯èƒ½åœ¨ä¸å‘ç”Ÿæ‰­æ›²æˆ–åˆ‡å‰²çš„æƒ…å†µä¸‹æŠŠæ¤­åœ†ä½“çš„è¡¨é¢æ˜ å°„åˆ°ä¸€ä¸ªå¹³é¢ä¸Šï¼Œå› æ­¤å¿…é¡»å¯¹æ‰­æ›²ä½œå‡ºé€‰æ‹©ã€‚è¿™å°±æ˜¯åœ°å›¾æŠ•å½±çš„å·¥ä½œã€‚ åœ°å›¾æŠ•å½±é€šå¸¸æŒ‰ç…§å®ƒä»¬ä¿ç•™çš„å‡ ä½•å±æ€§æ¥åˆ†ç±»ï¼Œä¾‹å¦‚ï¼š\n\n\n\né¢ç§¯ä¿æŠ¤å‹æŠ•å½±ç¡®ä¿åœ°çƒä¸Šé¢ç§¯ç›¸ç­‰çš„åŒºåŸŸåœ¨åœ°å›¾ä¸Šçš„ç»˜åˆ¶é¢ç§¯ç›¸ç­‰ã€‚\n\nå½¢çŠ¶ä¿æŠ¤å‹ï¼ˆä¿å½¢æˆ–ä¿è§’ï¼‰æŠ•å½±ç¡®ä¿åŒºåŸŸçš„å±€éƒ¨å½¢çŠ¶å¾—åˆ°ä¿ç•™ã€‚\n\nä»»ä½•æŠ•å½±éƒ½æ— æ³•åšåˆ°æ—¢ä¿å½¢åˆä¿é¢ç§¯ï¼Œsfå…è®¸æˆ‘ä»¬å¯ä»¥æŒ‡å®šæƒ³ä½¿ç”¨çš„åœ°å›¾æŠ•å½±ã€‚å…³äºåœ°å›¾æŠ•å½±çš„æ›´å¤šä¿¡æ¯ï¼Œå‚è§Geocomputation with Rã€‚\nç»¼ä¸Šï¼Œå¤§åœ°åŸºå‡†ï¼ˆå¦‚WGS84ï¼‰ã€åœ°å›¾æŠ•å½±ç±»å‹ï¼ˆå¦‚å¢¨å¡æ‰˜ï¼‰å’ŒæŠ•å½±å‚æ•°ï¼ˆå¦‚åŸç‚¹ä½ç½®ï¼‰å…±åŒæŒ‡å®šäº†ä¸€ä¸ªåæ ‡å‚è€ƒç³»ç»Ÿï¼ˆcoordinate reference systemï¼ŒCRSï¼‰ã€‚è¿™æ˜¯ä¸€å¥—ç”¨äºå°†ç»çº¬åº¦ä¿¡æ¯è½¬æ¢ä¸ºäºŒç»´åœ°å›¾çš„å®Œæ•´å‡è®¾ã€‚ä¸€ä¸ªsfå¯¹è±¡é€šå¸¸åŒ…æ‹¬ä¸€ä¸ªé»˜è®¤çš„CRSï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\nst_crs(oz_votes)\n#> Coordinate Reference System:\n#>   User input: EPSG:4283 \n#>   wkt:\n#> GEOGCRS[\"GDA94\",\n#>     DATUM[\"Geocentric Datum of Australia 1994\",\n#>         ELLIPSOID[\"GRS 1980\",6378137,298.257222101,\n#>             LENGTHUNIT[\"metre\",1]]],\n#>     PRIMEM[\"Greenwich\",0,\n#>         ANGLEUNIT[\"degree\",0.0174532925199433]],\n#>     CS[ellipsoidal,2],\n#>         AXIS[\"geodetic latitude (Lat)\",north,\n#>             ORDER[1],\n#>             ANGLEUNIT[\"degree\",0.0174532925199433]],\n#>         AXIS[\"geodetic longitude (Lon)\",east,\n#>             ORDER[2],\n#>             ANGLEUNIT[\"degree\",0.0174532925199433]],\n#>     USAGE[\n#>         SCOPE[\"Horizontal component of 3D system.\"],\n#>         AREA[\"Australia including Lord Howe Island, Macquarie Islands, Ashmore and Cartier Islands, Christmas Island, Cocos (Keeling) Islands, Norfolk Island. All onshore and offshore.\"],\n#>         BBOX[-60.56,93.41,-8.47,173.35]],\n#>     ID[\"EPSG\",4283]]\n\nè¿™äº›è¾“å‡ºå¤§å¤šå¯¹åº”äºä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„æ–‡æœ¬ï¼ˆwell-know textï¼ŒWKTï¼‰å­—ç¬¦ä¸²ï¼Œå®ƒè¯¦ç»†æè¿°äº†CRSã€‚sfå†…éƒ¨ä½¿ç”¨è¿™ç§å†—é•¿çš„WKTè¡¨ç¤ºæ³•ï¼Œä½†æ˜¯æœ‰å‡ ç§æ–¹æ³•å¯ä»¥æä¾›sfç†è§£çš„ç”¨æˆ·è¾“å…¥ã€‚å…¶ä¸­ä¸€ç§æ–¹æ³•æ˜¯ä»¥EPSGä»£ç çš„å½¢å¼æä¾›æ•°å­—è¾“å…¥ã€‚oz_votesæ•°æ®ä¸­çš„é»˜è®¤CRSä¸EPSGä»£ç 4283ç›¸å¯¹åº”ã€‚\n\nst_crs(oz_votes) == st_crs(4283)\n#> [1] TRUE\n\nåœ¨ggplot2ä¸­ï¼Œcoord_sf()æ§åˆ¶CRSï¼Œä»¥ç¡®ä¿æ¯ä¸€å±‚éƒ½ä½¿ç”¨ç›¸åŒçš„æŠ•å½±ã€‚sfæ•°æ®é€šå¸¸ä¼šæä¾›ä¸€ä¸ªåˆç†çš„CRSé€‰æ‹©ï¼Œcoord_sf()é»˜è®¤ä½¿ç”¨æ•°æ®geometryåˆ—ç›¸å…³çš„CRSã€‚å½“éœ€è¦æŒ‡å®šCRSæ—¶ï¼Œå¯ä»¥é€šè¿‡å‘st_crs()ä¼ é€’crså‚æ•°ï¼š\n\nggplot(oz_votes) + geom_sf()\nggplot(oz_states) + geom_sf() + coord_sf(crs = st_crs(3112))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1.4.3 Raster maps\nç»˜åˆ¶åœ°ç†ç©ºé—´ä¿¡æ¯çš„ç¬¬äºŒç§æ–¹å¼æ˜¯ä¾é æ …æ ¼æ•°æ®ï¼ˆraster dataï¼‰ã€‚ä¸sfæ•°æ®ä¸åŒï¼Œæ …æ ¼æ•°æ®ä¸­ï¼Œåœ°ç†å®ä½“æ˜¯ä»¥ä¸€ç»„çº¿ã€ç‚¹å’Œå¤šè¾¹å½¢çš„å½¢å¼æ¥æŒ‡å®šçš„ï¼Œè€Œæ …æ ¼åˆ™æ˜¯ä»¥å›¾åƒçš„å½¢å¼å‡ºç°ã€‚åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œå…‰æ …æ•°æ®å¯èƒ½æ˜¯ä¸€ä¸ªæœ‰è®¸å¤šä¸åŒçš„å›¾åƒæ ¼å¼ä½å›¾æ–‡ä»¶ã€‚å…·ä½“åˆ°åœ°ç†ç©ºé—´æ–¹é¢ï¼Œæœ‰ä¸€äº›å›¾åƒæ ¼å¼åŒ…æ‹¬å…ƒæ•°æ®ï¼ˆå¦‚å¤§åœ°æµ‹é‡åŸºå‡†ã€åæ ‡å‚è€ƒç³»ç»Ÿï¼‰ï¼Œå¯ç”¨äºå°†å›¾åƒä¿¡æ¯æ˜ å°„åˆ°åœ°çƒè¡¨é¢ã€‚\nåœ¨GDALï¼ˆåœ°ç†ç©ºé—´æ•°æ®æŠ½è±¡åº“ï¼‰çš„å¸®åŠ©ä¸‹ï¼Œå¤§å¤šæ•°æ ¼å¼å¯ä»¥å¾ˆå®¹æ˜“åœ°è¯»å…¥Rã€‚ä¾‹å¦‚ï¼ŒsfåŒ…ä¸­çš„sf::gdal_read()å‡½æ•°æä¾›äº†ä»Rä¸­è®¿é—®GDALçš„åŠŸèƒ½ã€‚ä¸è¿‡ï¼Œå¾ˆå°‘éœ€è¦ç›´æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå› ä¸ºè¿˜æœ‰å…¶ä»–é«˜çº§å‡½æ•°å¯ä»¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æƒ³ç»˜åˆ¶æ¾³å¤§åˆ©äºšæ°”è±¡å±€ï¼ˆBOMï¼‰åœ¨å…¶FTPæœåŠ¡å™¨ä¸Šå…¬å¼€æä¾›çš„å«æ˜Ÿå›¾åƒã€‚bomrangåŒ…(Sparks et al. 2017)æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„æœåŠ¡å™¨æ¥å£ï¼ŒåŒ…æ‹¬ä¸€ä¸ªè¿”å›æ–‡ä»¶åå‘é‡çš„get_available_imagery()å‡½æ•°å’Œä¸€ä¸ªä¸‹è½½æ–‡ä»¶å¹¶ç›´æ¥å¯¼å…¥Rä¸­çš„get_satellite_imagery()å‡½æ•°ã€‚\nè¿™é‡Œä½¿ç”¨æ›´çµæ´»çš„æ–¹å¼ï¼Œå¯ä»¥é€‚ç”¨ä»»ä½•FTPæœåŠ¡å™¨ï¼Œå¹¶ä½¿ç”¨download.file()å‡½æ•°ï¼š\n\n# list of all file names with time stamp 2022-08-04 21:00 GMT \n# (BOM images are retained for 24 hours, so this will return an\n# empty vector if you run this code without editing the time stamp)\nfiles <- bomrang::get_available_imagery() %>% \n  str_subset(\"202208042100\")\n\nwalk2(\n  .x = paste0(\"ftp://ftp.bom.gov.au/anon/gen/gms/\", files),\n  .y = file.path(\"raster\", files),\n  .f = ~ download.file(url = .x, destfile = .y)\n)\n\næ‰€æœ‰14ä¸ªæ–‡ä»¶2éƒ½æ˜¯ç”±æ—¥æœ¬æ°”è±¡å…è¿è¥çš„Himawari-8åœ°çƒé™æ­¢å«æ˜Ÿæ‹æ‘„çš„å›¾åƒæ„å»ºçš„ï¼Œå¹¶åœ¨13ä¸ªä¸åŒçš„æ³¢æ®µæ‹æ‘„å›¾åƒã€‚æ¾³å¤§åˆ©äºšBOMå‘å¸ƒçš„å›¾åƒåŒ…æ‹¬å¯è§å…‰è°±ï¼ˆé¢‘é“3ï¼‰å’Œçº¢å¤–å…‰è°±ï¼ˆé¢‘é“13ï¼‰çš„æ•°æ®ã€‚\nä¸ºäº†å°†å¯è§å›¾ç‰‡å¯¼å…¥Rï¼Œä½¿ç”¨starsåŒ…(Pebesma 2022)å°†å…¶å¯¼å…¥ä¸ºstarså¯¹è±¡ï¼š\n\nimg_vis  <- file.path(\"raster\", \"IDE00422.202208042100.tif\")\nimg_inf <- file.path(\"raster\", \"IDE00421.202208042100.tif\")\n\nlibrary(stars)\n#> Loading required package: abind\nsat_vis <- read_stars(img_vis, RasterIO = list(nBufXSize = 600, nBufYSize = 600))\nsat_inf <- read_stars(img_inf, RasterIO = list(nBufXSize = 600, nBufYSize = 600))\n\nRasterIOå‚æ•°ç”¨æ¥å‘GDALä¼ é€’ä¸€åˆ—ä½çº§å‚æ•°ï¼Œä½¿ç”¨äº†nBufXSizeå’ŒnBufYSizeæ¥ç¡®ä¿Rä»¥ä½åˆ†è¾¨ç‡è¯»å–æ•°æ®ï¼ˆä½œä¸º600x600åƒç´ çš„å›¾åƒï¼‰ã€‚\n\nsat_vis\n#> stars object with 3 dimensions and 1 attribute\n#> attribute(s), summary of first 1e+05 cells:\n#>                            Min. 1st Qu. Median Mean 3rd Qu. Max.\n#> IDE00422.202208042100.tif     0       0      0 37.9      52  255\n#> dimension(s):\n#>      from  to   offset    delta                  refsys point\n#> x       1 600 -5500000  18333.3 Geostationary_Satellite FALSE\n#> y       1 600  5500000 -18333.3 Geostationary_Satellite FALSE\n#> band    1   3       NA       NA                      NA    NA\n#>      values x/y\n#> x      NULL [x]\n#> y      NULL [y]\n#> band   NULL\n\næ³¨æ„ï¼Œç©ºé—´æ•°æ®ä¹Ÿä¸ä¸€ä¸ªåæ ‡å‚è€ƒç³»ç»Ÿç›¸å…³è”ï¼ˆåœ¨è¾“å‡ºä¸­è¢«ç§°ä¸º â€œrefsysâ€ï¼‰ã€‚\nåˆ©ç”¨starsåŒ…æä¾›çš„geom_stars()å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ggplot2è¿›è¡Œç»˜å›¾ï¼š\n\nggplot() +\n  geom_stars(data = sat_vis) +\n  coord_equal()\n\n\n\n\n\n\n\ngeom_stars()å‡½æ•°è¦æ±‚æ•°æ®æ˜¯starså¯¹è±¡ï¼Œå¹¶å°†æ …æ ¼æ•°æ®æ˜ å°„åˆ°å¡«å……ï¼ˆfillï¼‰ç¾å­¦ã€‚å› æ­¤ï¼Œä¸Šé¢çš„å«æ˜Ÿå›¾åƒä¸­çš„è“è‰²é˜´å½±æ˜¯ç”±ggplot2çš„æ¯”ä¾‹å†³å®šçš„ï¼Œè€Œä¸æ˜¯å›¾åƒæœ¬èº«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå°½ç®¡sat_visåŒ…å«ä¸‰ä¸ªæ³¢æ®µï¼Œä½†ä¸Šé¢çš„ç»˜å›¾åªæ˜¾ç¤ºç¬¬ä¸€ä¸ªæ³¢æ®µï¼ŒåŸå§‹æ•°æ®å€¼ï¼ˆèŒƒå›´ä»0åˆ°255ï¼‰è¢«æ˜ å°„åˆ°ggplot2ç”¨äºè¿ç»­æ•°æ®çš„é»˜è®¤è“è‰²è°ƒè‰²æ¿ä¸Šã€‚ä¸ºäº†çœ‹åˆ°å›¾åƒæ–‡ä»¶çš„çœŸå®é¢è²Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨facet_wrap()åˆ†ç¦»è¿™äº›æ³¢æ®µï¼š\n\nggplot() +\n  geom_stars(data = sat_vis, show.legend = FALSE) +\n  facet_wrap(vars(band)) +\n  coord_equal() +\n  scale_fill_gradient(low = \"black\", high = \"white\")\n\n\n\n\n\n\n\nåªæ˜¾ç¤ºåŸå§‹å›¾åƒä¸æ˜“å¼„æ¸…æ¥šç›¸å…³çš„é™†åœ°åœ¨å“ªé‡Œï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›å°†å«æ˜Ÿæ•°æ®ä¸oz_statesçŸ¢é‡åœ°å›¾é‡å ï¼Œä»¥æ˜¾ç¤ºæ¾³å¤§åˆ©äºšæ”¿æ²»å®ä½“çš„è½®å»“ã€‚è¿™æ ·åšéœ€æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªæ•°æ®æºå…·æœ‰ä¸åŒçš„åæ ‡å‚è€ƒç³»ç»Ÿã€‚ä¸ºäº†æ­£ç¡®æŠ•å½±oz_statesçš„æ•°æ®ï¼Œéœ€ä½¿ç”¨sfåŒ…ä¸­çš„st_transform()å‡½æ•°å¯¹æ•°æ®è¿›è¡Œè½¬æ¢ã€‚ä¸‹é¢çš„ä»£ç å°†ä»sat_visæ …æ ¼å¯¹è±¡ä¸­æå–CRSï¼Œå¹¶åº”ç”¨äºoz_statesï¼Œè€Œåè¿›è¡Œå¯è§†åŒ–ï¼š\n\noz_states <- st_transform(oz_states, crs = st_crs(sat_vis))\n\nggplot() +\n  geom_stars(data = sat_vis, show.legend = FALSE) +\n  geom_sf(data = oz_states, fill = NA, color = \"white\") +\n  coord_sf() +\n  theme_void() +\n  scale_fill_gradient(low = \"black\", high = \"white\")\n\n\n\n\n\n\n\nå¯ä»¥çœ‹åˆ°åœ¨è¿™ä¸ªæ‹æ‘„æ—¶é—´ï¼Œæ¾³å¤§åˆ©äºšå³å°†æ—¥å‡ºã€‚\nå¦‚ä½•åœ¨ä¸Šé¢ç»˜åˆ¶æ›´å¤šçš„å¸¸è§„æ•°æ®å‘¢ï¼Ÿä¸€ä¸ªç®€å•çš„ä¾‹å­æ˜¯æ ¹æ®åŒ…å«ç»çº¬åº¦çš„oz_capitalsæ•°æ®æ¡†æ¥ç»˜åˆ¶æ¾³å¤§åˆ©äºšé¦–éƒ½çš„ä½ç½®ã€‚ç„¶è€Œï¼Œç”±äºè¿™äº›æ•°æ®æ²¡æœ‰ä¸CRSç›¸å…³è”ï¼Œå¹¶ä¸”ä¸sat_visä¸­çš„æ …æ ¼æ•°æ®çš„æ¯”ä¾‹ä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¿™äº›æ•°æ®ä¹Ÿéœ€è¦è¿›è¡Œè½¬æ¢ã€‚ä¸ºæ­¤ï¼Œé¦–å…ˆéœ€è¦ä½¿ç”¨st_as_sf()ä»oz_capitalsæ•°æ®ä¸­åˆ›å»ºsfå¯¹è±¡ï¼š\n\ncities <- oz_capitals %>% \n  st_as_sf(coords = c(\"lon\", \"lat\"), crs = 4326, remove = FALSE)\n\nè¿™ä¸ªæŠ•å½±æ˜¯ä½¿ç”¨EPSGä»£ç 4326è®¾ç½®çš„ï¼Œè¿™æ˜¯ä½¿ç”¨ç»çº¬åº¦å€¼ä½œä¸ºåæ ‡å¹¶ä¾é WGS84åŸºå‡†çš„æ¤­åœ†å½¢æŠ•å½±ã€‚è€Œåå¯ä»¥å°†ç»çº¬åº¦å‡ ä½•åæ ‡è½¬æ¢ä¸ºä¸sat_visæ•°æ®çš„å‡ ä½•å½¢çŠ¶ç›¸åŒ¹é…ã€‚\n\ncities <- st_transform(cities, st_crs(sat_vis))\n\nggplot() +\n  geom_stars(data = sat_vis, show.legend = FALSE) +\n  geom_sf(data = oz_states, fill = NA, color = \"white\") +\n  geom_sf(data = cities, color = \"red\") +\n  coord_sf() +\n  theme_void() +\n  scale_fill_gradient(low = \"black\", high = \"white\")\n\n\n\n\n\n\n\nå¦‚æœæœ‰è‡ªå·±çš„å½¢çŠ¶æ–‡ä»¶ï¼ˆ.shpï¼‰ï¼Œå¯ä»¥ç”¨sf::read_sf()æŠŠå®ƒä»¬åŠ è½½åˆ°Rä¸­ã€‚"
  },
  {
    "objectID": "vis-ggplot2-layers.html#ç½‘ç»œå›¾",
    "href": "vis-ggplot2-layers.html#ç½‘ç»œå›¾",
    "title": "1Â  ggplot2-layers",
    "section": "\n1.5 ç½‘ç»œå›¾",
    "text": "1.5 ç½‘ç»œå›¾\nç½‘ç»œåœ¨å¯è§†åŒ–ä¸­å æ®äº†ä¸€å¸­ä¹‹åœ°ï¼Œå’Œåœ°å›¾ã€ç©ºé—´æ•°æ®ä¸€æ ·ï¼Œç½‘ç»œå…·æœ‰ç‰¹å®šçš„æ•°æ®ç»“æ„å’Œå¯è§†åŒ–èŒƒå¼ï¼Œggplot2å¹¶ä¸ç›´æ¥æ”¯æŒç½‘ç»œå›¾ï¼Œæ¥ä¸‹æ¥å°†ä½¿ç”¨ggraphåŒ…(Pedersen 2021b)è¿›è¡Œç½‘ç»œçš„å¯è§†åŒ–ã€‚\n\n1.5.1 ç½‘ç»œæ•°æ®\nç½‘ç»œæ•°æ®å¯ä»¥ç¼–ç ä¸ºä¸¤ä¸ªç›¸äº’å…³è”çš„æ•°æ®å¸§ï¼Œåˆ†åˆ«ç¼–ç èŠ‚ç‚¹å’Œè¾¹ï¼Œè¿™å°±æ˜¯tidygraphåŒ…(Pedersen 2022)ä½¿ç”¨çš„æ–¹æ³•ï¼Œå®ƒæ˜¯ggraphçš„åŸºç¡€æ•°æ®å¤„ç†åŒ…ã€‚\n\nlibrary(tidygraph)\nlibrary(ggraph)\n\ngraph <- play_erdos_renyi(n = 10, p = .2) %>% \n  activate(nodes) %>% \n  mutate(class = sample(letters[1:4], n(), replace = TRUE)) %>% \n  activate(edges) %>% \n  arrange(.N()$class[from])\ngraph\n#> # A tbl_graph: 10 nodes and 12 edges\n#> #\n#> # A directed simple graph with 1 component\n#> #\n#> # Edge Data: 12 Ã— 2 (active)\n#>    from    to\n#>   <int> <int>\n#> 1     2     9\n#> 2     1     2\n#> 3     6     3\n#> 4     7     5\n#> 5     6    10\n#> 6     5     7\n#> # â€¦ with 6 more rows\n#> #\n#> # Node Data: 10 Ã— 1\n#>   class\n#>   <chr>\n#> 1 c    \n#> 2 b    \n#> 3 d    \n#> # â€¦ with 7 more rows\n\nä¸€äº›æ–°å‡½æ•°ï¼šactivate()æŒ‡å®šåœ¨ç½‘ç»œçš„å“ªä¸ªéƒ¨åˆ†å·¥ä½œï¼ˆèŠ‚ç‚¹æˆ–è€…è¾¹ï¼‰ï¼›å³ä½¿åœ¨å¤„ç†è¾¹çš„æ—¶å€™ï¼Œ.N()ä¹Ÿå¯ä»¥è®¿é—®å½“å‰å›¾å½¢çš„èŠ‚ç‚¹æ•°æ®ï¼ˆä¸ä¹‹å¯¹åº”çš„.E()å‡½æ•°è®¿é—®è¾¹çš„æ•°æ®ï¼Œä»¥åŠ.G()è®¿é—®æ•´ä¸ªå›¾å½¢ï¼‰ã€‚\ntidygraphåŒ…çš„as_tbl_graph()å¯ä»¥å°†å¤§éƒ¨åˆ†ä¸åŒå½¢å¼çš„ç½‘ç»œæ•°æ®è¿›è¡Œè½¬æ¢:\n\nhead(highschool)\n#>   from to year\n#> 1    1 14 1957\n#> 2    1 15 1957\n#> 3    1 21 1957\n#> 4    1 54 1957\n#> 5    1 55 1957\n#> 6    2 21 1957\n\nhs_graph <- as_tbl_graph(highschool, directed = FALSE) # ä¸å¸¦æ–¹å‘\nhs_graph\n#> # A tbl_graph: 70 nodes and 506 edges\n#> #\n#> # An undirected multigraph with 1 component\n#> #\n#> # Node Data: 70 Ã— 1 (active)\n#>   name \n#>   <chr>\n#> 1 1    \n#> 2 2    \n#> 3 3    \n#> 4 4    \n#> 5 5    \n#> 6 6    \n#> # â€¦ with 64 more rows\n#> #\n#> # Edge Data: 506 Ã— 3\n#>    from    to  year\n#>   <int> <int> <dbl>\n#> 1     1    13  1957\n#> 2     1    14  1957\n#> 3     1    20  1957\n#> # â€¦ with 503 more rows\n\n\nluv_clust <- hclust(dist(luv_colours[, 1:3]))\nluv_graph <- as_tbl_graph(luv_clust)\nluv_graph\n#> # A tbl_graph: 1313 nodes and 1312 edges\n#> #\n#> # A rooted tree\n#> #\n#> # Node Data: 1,313 Ã— 4 (active)\n#>   height leaf  label members\n#>    <dbl> <lgl> <chr>   <int>\n#> 1     0  TRUE  \"101\"       1\n#> 2     0  TRUE  \"427\"       1\n#> 3   778. FALSE \"\"          2\n#> 4     0  TRUE  \"571\"       1\n#> 5     0  TRUE  \"426\"       1\n#> 6     0  TRUE  \"424\"       1\n#> # â€¦ with 1,307 more rows\n#> #\n#> # Edge Data: 1,312 Ã— 2\n#>    from    to\n#>   <int> <int>\n#> 1     3     1\n#> 2     3     2\n#> 3     8     6\n#> # â€¦ with 1,309 more rows\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œtidygraphåœ¨è½¬æ¢æ—¶è‡ªåŠ¨æ·»åŠ äº†é¢å¤–çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œhighschoolæ•°æ®ä¸­çš„yearåˆ—ï¼Œä»¥åŠåˆ†å±‚èšç±»luv_clustä¸­çš„labelå’ŒleafèŠ‚ç‚¹ã€‚\n\n# ä¸­å¿ƒåº¦è®¡ç®—\ngraph %>% \n  activate(nodes) %>% \n  mutate(centrality = centrality_pagerank()) %>% \n  arrange(desc(centrality))\n#> # A tbl_graph: 10 nodes and 12 edges\n#> #\n#> # A directed simple graph with 1 component\n#> #\n#> # Node Data: 10 Ã— 2 (active)\n#>   class centrality\n#>   <chr>      <dbl>\n#> 1 c         0.201 \n#> 2 c         0.191 \n#> 3 c         0.120 \n#> 4 c         0.120 \n#> 5 d         0.0920\n#> 6 a         0.0778\n#> # â€¦ with 4 more rows\n#> #\n#> # Edge Data: 12 Ã— 2\n#>    from    to\n#>   <int> <int>\n#> 1     7     1\n#> 2     9     7\n#> 3    10     8\n#> # â€¦ with 9 more rows\n\ntidygraphæ”¯æŒä¸€ç³»åˆ—ä¸°å¯Œçš„ç®—æ³•ï¼Œæ¯”å¦‚ä¸­å¿ƒåº¦è®¡ç®—ï¼ˆå“ªä¸ªèŠ‚ç‚¹æœ€ä¸­å¿ƒï¼‰ã€æ’åºï¼ˆå¯¹èŠ‚ç‚¹è¿›è¡Œæ’åºï¼Œä½¿èŠ‚ç‚¹ä½äºä¸ä¹‹ç›¸è¿çš„èŠ‚ç‚¹é™„è¿‘ï¼‰ã€åˆ†ç»„ï¼ˆåœ¨ç½‘ç»œå†…å¯»æ‰¾ç¾¤ç»„ï¼‰ç­‰ï¼Œå…·ä½“è§è¿™é‡Œã€‚\nç½‘ç»œå›¾æ›´å…³æ³¨æ‹“æ‰‘ç»“æ„è€Œä¸æ˜¯ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬é‡‡ç”¨å¸ƒå±€ï¼ˆLayoutsï¼‰çš„æ¦‚å¿µæ¥æ˜¾ç¤ºç½‘ç»œæ‹“æ‰‘ç»“æ„ã€‚å¸ƒå±€æ˜¯åˆ©ç”¨ç½‘ç»œç»“æ„æ¥è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„xå’Œyå€¼ï¼ˆé€šå¸¸æ˜¯ä»»æ„çš„ï¼‰çš„ç®—æ³•ï¼Œæœ€ç»ˆç”¨äºå¯è§†åŒ–ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨ç»˜åˆ¶è¡¨æ ¼æ•°æ®æ—¶ï¼Œxå’Œyçš„ç¾å­¦å‡ ä¹æ€»æ˜¯è¢«æ•°æ®ä¸­çš„ç°æœ‰å˜é‡ï¼ˆæˆ–ç°æœ‰æ•°æ®çš„ç»Ÿè®¡è½¬æ¢ï¼‰æ˜ å°„ï¼Œè€Œåœ¨ç»˜åˆ¶ç½‘ç»œæ•°æ®æ—¶ï¼Œxå’Œyè¢«æ¥è‡ªç½‘ç»œæ‹“æ‰‘ç»“æ„çš„å€¼æ˜ å°„ï¼Œè¿™äº›å€¼æœ¬èº«æ²¡æœ‰æ„ä¹‰ã€‚\n\nggraph(hs_graph) +\n  geom_edge_link() +\n  geom_node_point()\n#> Using `stress` as default layout\n\nggraph(hs_graph, layout = \"drl\") +\n  geom_edge_link() +\n  geom_node_point()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhs_graph <- hs_graph %>% \n  activate(edges) %>% \n  mutate(edge_weights = runif(n()))\nggraph(hs_graph, layout = \"stress\", weights = edge_weights) +\n  geom_edge_link(aes(alpha = edge_weights)) +\n  geom_node_point() +\n  scale_edge_alpha_identity()\n\n# ç¯å½¢\nggraph(luv_graph, layout = \"dendrogram\", circular = TRUE) +\n  geom_edge_link() +\n  coord_fixed()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1.5.2 ç»˜åˆ¶èŠ‚ç‚¹ï¼ˆnodesï¼‰\n\n# åªæ˜¾ç¤º2ä¸ªä»¥ä¸Šçš„èŠ‚ç‚¹ï¼ŒæŒ‰ä¸­å¿ƒåº¦ç€è‰²\nggraph(hs_graph, layout = \"stress\") +\n  geom_edge_link() +\n  geom_node_point(\n    aes(filter = centrality_degree() > 2,\n        color = centrality_power()),\n    size = 2\n  )\n\n# æ ‘çŠ¶å›¾\nggraph(luv_graph, layout = \"treemap\") +\n  geom_node_tile(aes(fill = depth))\n#> Warning: Existing variables `height`, `leaf` overwritten by layout\n#> variables\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1.5.3 ç»˜åˆ¶è¾¹ç¼˜ï¼ˆedgesï¼‰\n\nggraph(graph, layout = \"stress\") +\n  geom_edge_link(aes(alpha = after_stat(index)))\n\nggraph(graph, layout = \"stress\") +\n  geom_edge_link2(\n    aes(color = node.class),\n    width = 3, lineend = \"round\"\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggraph(hs_graph, layout = \"stress\") +\n  geom_edge_fan()\n\nggraph(hs_graph, layout = \"stress\") +\n  geom_edge_parallel()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggraph(luv_graph, layout = \"dendrogram\", height = height) +\n  geom_edge_elbow()\n\nggraph(luv_graph, layout = \"dendrogram\", height = height) +\n  geom_edge_bend()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# èŠ‚ç‚¹ä¼šé®ç›–ç®­å¤´\nggraph(graph, layout = \"stress\") +\n  geom_edge_link(arrow = arrow()) +\n  geom_node_point(aes(color = class), size = 6)\n\n# è§£å†³ä¸Šè¿°é—®é¢˜\nggraph(graph, layout = \"stress\") +\n  geom_edge_link(\n    arrow = arrow(),\n    start_cap = circle(3, \"mm\"),\n    end_cap = circle(3, \"mm\")\n  ) +\n  geom_node_point(aes(color = class), size = 6)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1.5.4 åˆ†é¢\n\nggraph(hs_graph, layout = \"stress\") +\n  geom_edge_link() +\n  geom_node_point() +\n  facet_edges(~year)\n\n\n\n\n\n\n\n\nggraph(hs_graph, layout = \"stress\") +\n  geom_edge_link() +\n  geom_node_point() +\n  facet_nodes(~ group_spinglass())"
  },
  {
    "objectID": "vis-ggplot2-layers.html#æ³¨é‡Š",
    "href": "vis-ggplot2-layers.html#æ³¨é‡Š",
    "title": "1Â  ggplot2-layers",
    "section": "\n1.6 æ³¨é‡Š",
    "text": "1.6 æ³¨é‡Š\nä»æ¦‚å¿µä¸Šè®²ï¼Œæ³¨é‡Šä¸ºç»˜å›¾æä¾›äº†å…ƒæ•°æ®ï¼Œå®ƒæä¾›äº†å…³äºæ•°æ®çš„é¢å¤–ä¿¡æ¯ã€‚\n\n1.6.1 å›¾å½¢å’Œè½´æ ‡é¢˜\n\nggplot(mpg, aes(displ, hwy)) +\n  geom_point(aes(color = factor(cyl))) +\n  labs(\n    x = \"Engine displacement (litres)\",\n    y = \"Highway miles per gallon\",\n    color = \"Number of cylinders\",\n    title = \"Mileage by engine size and cylinders\",\n    subtitle = \"Source: http://fueleconomy.gov\"\n  )\n\n\n\n\n\n\n\né€šå¸¸ç»™labs()æä¾›æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œå¹¶ç”¨\\næŒ‡å®šæ¢è¡Œï¼Œä¹Ÿå¯ä»¥æä¾›ç”¨quote()åŒ…è£¹çš„æ•°å­¦è¡¨è¾¾å¼ï¼š\n\nvalues <- seq(from = -2, to = 2, by = .01)\ndf <- data.frame(x = values, y = values ^ 3)\nggplot(df, aes(x, y)) +\n  geom_line() +\n  labs(y = quote(f(x) == x^3))\n\n\n\n\n\n\n\nåœ¨ggtextåŒ…(Wilke 2020)å’Œggplot2ä¸»é¢˜ç³»ç»Ÿä¸‹ï¼Œå¯ä»¥ä½¿ç”¨Markdownè¯­æ³•è¿›è¡Œæ ‡è®°ï¼š\n\ndf <- data.frame(x = 1:3, y = 1:3)\nbase <- ggplot(df, aes(x, y)) +\n  geom_point() +\n  labs(x = \"Axis title with *italics* and **boldface**\")\n\nbase\nbase + theme(axis.title.x = ggtext::element_markdown())\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nImportant\n\n\n\næœªå‡ºç°æ–œä½“å’ŒåŠ ç²—æ•ˆæœï¼Œæš‚æœªå‘ç°åŸå› ã€‚æ—¥åä¼šå¤„ç†ã€‚\n\n\n\n1.6.2 æ–‡æœ¬æ ‡ç­¾\nå­—ä½“\n\ndf <- data.frame(x = 1, y = 3:1, family = c(\"sans\", \"serif\", \"mono\"))\nggplot(df, aes(x, y)) +\n  geom_text(aes(label = family, family = family))\n\n\n\n\n\n\n\nå¦‚éœ€æ›´å¤šå­—ä½“ï¼Œä½¿ç”¨showtextåŒ…(Qiu and details. 2022)ï¼š\n\nlibrary(showtext)\n#> Loading required package: sysfonts\n#> Loading required package: showtextdb\n\n# font_install(source_han_serif()) # å®‰è£…å­—ä½“åº“\nfont_families()\n#> [1] \"sans\"                \"serif\"              \n#> [3] \"mono\"                \"wqy-microhei\"       \n#> [5] \"source-han-serif-cn\"\nhead(font_files()) # æŸ¥çœ‹ç³»ç»Ÿå­—ä½“\n#>               path         file       family        face\n#> 1 C:/Windows/Fonts  AGENCYB.TTF    Agency FB        Bold\n#> 2 C:/Windows/Fonts  AGENCYR.TTF    Agency FB     Regular\n#> 3 C:/Windows/Fonts    ALGER.TTF     Algerian     Regular\n#> 4 C:/Windows/Fonts  ANTQUAB.TTF Book Antiqua        Bold\n#> 5 C:/Windows/Fonts ANTQUABI.TTF Book Antiqua Bold Italic\n#> 6 C:/Windows/Fonts  ANTQUAI.TTF Book Antiqua      Italic\n#>        version                ps_name\n#> 1 Version 1.01          AgencyFB-Bold\n#> 2 Version 1.01           AgencyFB-Reg\n#> 3 Version 1.57               Algerian\n#> 4 Version 2.35       BookAntiqua-Bold\n#> 5 Version 2.35 BookAntiqua-BoldItalic\n#> 6 Version 2.35     BookAntiqua-Italic\n\n\nshowtext_auto()\n\nfont_add(\"simkai\", \"simkai.ttf\")\nfont_add(\"constan\", \"constan.ttf\", italic = \"constani.ttf\")\n\nggplot(NULL, aes(x = 1, y = 1)) + ylim(0.8, 1.2) +\n    theme(axis.title = element_blank(), axis.ticks = element_blank(),\n          axis.text = element_blank()) +\n    annotate(\"text\", 1, 1.1, family = \"simkai\", size = 15,\n             label = \"ä½ å¥½ï¼Œä¸–ç•Œï¼\") +\n    annotate(\"text\", 1, 0.9, label = 'Chinese for \"Hello, world!\"',\n             family = \"constan\", fontface = \"italic\", size = 8)\n\n\n\n\n\n\n\nåŠ ç²—ã€æ–œä½“\n\ndf <- data.frame(x = 1, y = 3:1, face = c(\"plain\", \"bold\", \"italic\"))\nggplot(df, aes(x, y)) +\n  geom_text(aes(label = face, fontface = face))\n\n\n\n\n\n\n\nå¯¹é½æ–¹å¼\n\ndf <- data.frame(\n  x = c(1, 1, 2, 2, 1.5),\n  y = c(1, 2, 1, 2, 1.5),\n  text = c(\n    \"bottom-left\", \"top-left\",\n    \"bottom-right\", \"top-right\", \"center\"\n  )\n)\n\nggplot(df, aes(x, y)) +\n  geom_text(aes(label = text))\nggplot(df, aes(x, y)) +\n  geom_text(aes(label = text), vjust = \"inward\", hjust = \"inward\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå¾®è°ƒ\n\ndf <- data.frame(resp = c(1.2, 3.4, 2.5), trt = letters[1:3])\n\nggplot(df, aes(resp, trt)) +\n  geom_point() +\n  geom_text(aes(label = paste0(\"(\", resp, \")\"))) +\n  xlim(1, 3.6)\nggplot(df, aes(resp, trt)) +\n  geom_point() +\n  geom_text(aes(label = paste0(\"(\", resp, \")\")), nudge_y = -.25) +\n  xlim(1, 3.6)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\né‡å æ£€æŸ¥\næŒ‰ç…§æ ‡ç­¾åœ¨æ•°æ®æ¡†ä¸­å‡ºç°çš„å…ˆåé¡ºåºç»˜åˆ¶æ ‡ç­¾ã€‚å¦‚åæ¥çš„æ ‡ç­¾è¦†ç›–å·²ç»˜åˆ¶çš„æ ‡ç­¾ï¼Œåˆ™å¿½ç•¥åæ¥çš„æ ‡ç­¾ã€‚å®é™…ä½¿ç”¨ä¸­ï¼Œå¯ä»¥å¯¹æ ‡ç­¾è¿›è¡Œä¼˜å…ˆçº§æ’åºï¼Œåç»˜åˆ¶å¸¦æœ‰æ ‡ç­¾çš„å›¾ï¼Œä»¥å¼ºè°ƒé‡è¦çš„æ•°æ®ã€‚\n\nggplot(mpg, aes(displ, hwy)) +\n  geom_text(aes(label = model)) +\n  xlim(1, 8)\nggplot(mpg, aes(displ, hwy)) +\n  geom_text(aes(label = model), check_overlap = TRUE) +\n  xlim(1, 8)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå¦ä¸€ç§æ–¹æ³•æ˜¯åˆ©ç”¨ggrepelåŒ…(Slowikowski 2021)çš„geom_text_repel()å‡½æ•°è¿›è¡Œç»˜åˆ¶ï¼š\n\nmini_mpg <- mpg[sample(nrow(mpg), 20), ]\nggplot(mpg, aes(displ, hwy)) +\n  geom_point(color = \"red\") +\n  ggrepel::geom_text_repel(data = mini_mpg, aes(label = class))\n#> Warning: ggrepel: 1 unlabeled data points (too many overlaps).\n#> Consider increasing max.overlaps\n\n\n\n\n\n\n\nggfittextåŒ…(Wilkins 2021)å¯ä»¥ç¡®ä¿æ–‡æœ¬æ ‡ç­¾é€‚åº”å…¶æ”¾ç½®çš„ç©ºé—´ï¼š\n\nlibrary(ggfittext)\nggplot(animals, aes(type, flies, label = animal)) +\n  geom_tile(fill = \"white\", color = \"black\") +\n  geom_fit_text()\nggplot(animals, aes(type, flies, label = animal)) +\n  geom_tile(fill = \"white\", color = \"black\") +\n  geom_fit_text(reflow = TRUE)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1.6.3 è‡ªå®šä¹‰æ³¨é‡Š\n\nggplot(economics, aes(date, unemploy)) +\n  geom_line()\n\n# ç¾å›½æ€»ç»Ÿä»»æœŸå’Œå…šæ´¾\npresidential <- subset(presidential, start > economics$date[1])\nggplot(economics) +\n  geom_rect(data = presidential,\n            aes(xmin = start, xmax = end, fill = party),\n            ymin = -Inf, ymax = Inf, alpha = .2) +\n  geom_vline(data = presidential,\n             aes(xintercept = as.numeric(start)),\n             color = \"grey50\", alpha = .5) +\n  geom_text(data = presidential,\n            aes(start, y = 2500, label = name),\n            size = 3, vjust = 0, hjust = 0, nudge_x = 50) +\n  geom_line(aes(date, unemploy)) +\n  scale_fill_manual(values = c(\"blue\", \"red\")) +\n  labs(x = \"date\", y = \"unemployment\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\np <- ggplot(mpg, aes(displ, hwy)) +\n  geom_point(data = filter(mpg, manufacturer == \"subaru\"),\n             color = \"orange\", size = 3) +\n  geom_point()\n\np + \n  annotate(\"point\", x = 5.5, y = 40, color = \"orange\", size = 3) +\n  annotate(\"point\", x = 5.5, y = 40) +\n  annotate(\"text\", x = 5.6, y = 40, label = \"subaru\", hjust = \"left\")\n\n# æ›´å¥½çš„æ–¹æ³•\np +\n  annotate(\"curve\", x = 4, y = 35, xend = 2.65, yend = 27,\n           curvature = .3, arrow = arrow(length = unit(2, \"mm\"))) +\n  annotate(\"text\", x = 4.1, y = 35, label = \"subaru\", hjust = \"left\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1.6.4 ç›´æ¥æ ‡æ³¨\ndirectlabelsåŒ…(Hocking 2021)ï¼š\n\nggplot(mpg, aes(displ, hwy, color = class)) +\n  geom_point()\n\nggplot(mpg, aes(displ, hwy, color = class)) +\n  geom_point(show.legend = FALSE) +\n  directlabels::geom_dl(aes(label = class), method = \"smart.grid\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggforceåŒ…(Pedersen 2021a):\n\nggplot(mpg, aes(displ, hwy)) +\n  geom_point() +\n  ggforce::geom_mark_ellipse(aes(label = cyl, group = cyl))\n\n\n\n\n\n\n\ngghighlightåŒ…(Yutani 2022)ï¼š\n\ndata(Oxboys, package = \"nlme\")\nggplot(Oxboys, aes(age, height, group = Subject)) +\n  geom_line() +\n  geom_point() +\n  gghighlight::gghighlight(Subject %in% 1:3)\n\n\n\n\n\n\n\nåˆ†é¢æ³¨é‡Šï¼š\n\nggplot(mpg, aes(displ, hwy, color = factor(cyl))) +\n  geom_point() +\n  gghighlight::gghighlight() +\n  facet_wrap(vars(cyl))"
  },
  {
    "objectID": "vis-ggplot2-layers.html#å›¾å½¢æ’åˆ—",
    "href": "vis-ggplot2-layers.html#å›¾å½¢æ’åˆ—",
    "title": "1Â  ggplot2-layers",
    "section": "\n1.7 å›¾å½¢æ’åˆ—",
    "text": "1.7 å›¾å½¢æ’åˆ—\nggplot2çš„è¯­æ³•æ˜¯å…³äºåˆ›å»ºå•ä¸ªå›¾å½¢çš„ï¼Œè™½ç„¶åˆ†é¢ç³»ç»Ÿæä¾›äº†äº§ç”Ÿå¤šä¸ªå­å›¾çš„æ–¹æ³•ï¼Œä½†éƒ½å±äºåŒä¸€ä¸ªå¯è§†åŒ–çš„éƒ¨åˆ†ï¼Œå®ƒä»¬å…±äº«å›¾å±‚ã€æ•°æ®å’Œæ ‡åº¦ã€‚æˆ‘ä»¬ç»å¸¸éœ€è¦å°†å¤šå¹…ç‹¬ç«‹åˆ›å»ºçš„å›¾å½¢ç»„åˆä¸ºä¸€å¼ å›¾ï¼Œè®¸å¤šåŒ…å·²åº”è¿è€Œç”Ÿï¼Œè¿™é‡Œé‡ç‚¹ä»‹ç»patchworkåŒ…(Pedersen 2020)ã€‚\nç»˜åˆ¶å››å¹…å›¾å½¢ç”¨äºæ’åˆ—ï¼š\n\np1 <- ggplot(mpg) + \n  geom_point(aes(x = displ, y = hwy))\n\np2 <- ggplot(mpg) + \n  geom_bar(aes(x = as.character(year), fill = drv), position = \"dodge\") + \n  labs(x = \"year\")\n\np3 <- ggplot(mpg) + \n  geom_density(aes(x = hwy, fill = drv), colour = NA) + \n  facet_grid(rows = vars(drv))\n\np4 <- ggplot(mpg) + \n  stat_summary(aes(x = drv, y = hwy, fill = drv), geom = \"col\", fun.data = mean_se) +\n  stat_summary(aes(x = drv, y = hwy), geom = \"errorbar\", fun.data = mean_se, width = 0.5)\n\n\nlibrary(patchwork)\n\np1 + p2\n\n\n\n\n\n\n\n+å¹¶æœªæŒ‡å®šä»»ä½•å…·ä½“çš„å¸ƒå±€ï¼Œåªæ˜¯å°†å›¾å½¢æ˜¾ç¤ºåœ¨ä¸€èµ·ã€‚åœ¨æ²¡æœ‰å¸ƒå±€çš„æƒ…å†µä¸‹ï¼Œfacet_wrap()ä¸­ç®¡ç†è¡Œå’Œåˆ—çš„ç®—æ³•å°†ç”¨äºå†³å®šè¡Œæ•°å’Œåˆ—æ•°ã€‚å¦‚æœæˆ‘ä»¬æ·»åŠ 3å¹…å›¾å½¢ï¼Œåˆ™ä¼šåˆ›å»º1Ã—3çš„ç½‘æ ¼ï¼›æ·»åŠ 4å¹…å›¾å½¢ï¼Œåˆ™ä¼šåˆ›å»º2Ã—2çš„ç½‘æ ¼ã€‚\n\np1 + p2 + p3 + p4\n\n\n\n\n\n\n\nå¯ä»¥çœ‹å‡ºï¼Œpatchworkå…³æ³¨ç»˜å›¾åŒºåŸŸçš„å¯¹é½ã€‚\n\n1.7.1 å¸ƒå±€æ§åˆ¶\n\np1 + p2 + p3 + plot_layout(ncol = 2)\n\n\n\n\n\n\n\n/è®¾ç½®åˆ—æ•°ä¸º1ï¼Œ|è®¾ç½®è¡Œæ•°ä¸º1ï¼š\n\n# ä¸¤å¹…å›¾æ’ä¸º1åˆ—\np1 / p2\n\n\n\n\n\n\n\n\n# ä¸¤å¹…å›¾æ’ä¸º1è¡Œ\np3 | p4\n\n\n\n\n\n\n\n/å’Œ|å¯ä»¥è¿›è¡Œç»„åˆä»¥åˆ›å»ºæ›´åŠ å¤æ‚çš„å›¾å½¢æ’åˆ—ï¼š\n\np3 | (p2 / (p1 | p4))\n\n\n\n\n\n\n\né’ˆå¯¹ç‰¹åˆ«å¤æ‚çš„å¸ƒå±€ï¼Œå¯ä»¥åœ¨plot_layout()çš„designå‚æ•°ä¸­åˆ¶å®šæ–‡æœ¬å½¢å¼çš„éè¡¨æ ¼å¸ƒå±€ï¼š\n\nlayout <- \"\nAAB\nC#B\nCDD\n\"\nlayout\n#> [1] \"\\nAAB\\nC#B\\nCDD\\n\"\n\np1 + p2 + p3 + p4 + plot_layout(design = layout)\n\n\n\n\n\n\n\nä»ä¸Šå¯ä»¥çœ‹å‡ºï¼Œå›¾å½¢é—´çš„å›¾ä¾‹ç»å¸¸æœ‰å¤šä½™ï¼Œpatchworkæä¾›äº†ç®€ä¾¿çš„å¤„ç†æ–¹æ³•ï¼Œå¯ä»¥åˆ é™¤å®Œå…¨ä¸€æ ·çš„å›¾ä¾‹ï¼š\n\np1 + p2 + p3 + plot_layout(ncol = 2, guides = \"collect\")\n\n\n\n\n\n\n\nå¯ä»¥æŒ‡å®šç»˜å›¾åŒºåŸŸï¼Œä¼˜åŒ–ç©ºé—´ä½¿ç”¨ï¼š\n\np1 + p2 + p3 + guide_area() + plot_layout(ncol = 2, guides = \"collect\")\n\n\n\n\n\n\n\n\n1.7.2 ä¿®æ”¹å­å›¾\nåœ¨patchworkæ¸²æŸ“å‰ï¼Œæ‰€æœ‰å­å›¾ä»ä¸ºggplotå¯¹è±¡ï¼Œå› æ­¤åœ¨ç»„åˆèµ·æ¥åå¯ä»¥è¢«ä¿®æ”¹ï¼Œä½¿ç”¨[[]]ç´¢å¼•åè¿›è¡Œè°ƒæ•´ï¼š\n\np12 <- p1 + p2\np12[[2]] <- p12[[2]] + theme_light()\np12\n\n\n\n\n\n\n\nä½¿ç”¨&ä¸€æ¬¡æ€§ä¿®æ”¹æ‰€æœ‰å­å›¾ï¼š\n\np1 + p4 & theme_minimal()\n\n\n\n\n\n\n\nå¦‚æœå›¾å½¢åœ¨è½´ä¸Šå…·æœ‰ç›¸åŒçš„æ˜ å°„ï¼Œå¯ä»¥ç”¨è¿™ç§æ–¹æ³•æŒ‡å®šå…±åŒè½´ï¼š\n\np1 + p4 & scale_y_continuous(limits = c(0, 45))\n\n\n\n\n\n\n\n\n1.7.3 æ·»åŠ æ³¨é‡Š\nä¸€æ—¦å›¾å½¢ç»„åˆå®Œæ¯•ï¼Œå®ƒä»¬å°±æˆä¸ºä¸€ä¸ªæ•´ä½“ï¼Œå¯ä»¥é€šè¿‡plot_annotation()å‘æ•´ä½“æ·»åŠ æ ‡é¢˜ã€å‰¯æ ‡é¢˜ç­‰æ³¨é‡Šã€‚\n\np34 <- p3 + p4 + plot_annotation(\n  title = \"A closer look at the effect of drive train in cars\",\n  caption = \"Source: mpg dataset in ggplot2\"\n)\np34\n\n\n\n\n\n\n\n\np34 + plot_annotation(theme = theme_gray(base_family = \"mono\"))\n\n\n\n\n\n\n\nä¸ºå­å›¾æ·»åŠ æ ‡ç­¾åœ¨ç§‘å­¦æ–‡çŒ®ä¸­å°¤å…¶å¸¸ç”¨ï¼Œggplot2å¸¦æœ‰tagå…ƒç´ ï¼Œpatchworkæä¾›tag_levelså‚æ•°è¿›è¡Œè‡ªåŠ¨è®¾ç½®ï¼š\n\np123 <- p1 | (p2 / p3)\np123 + plot_annotation(tag_levels = \"I\") # ä½¿ç”¨å¤§å†™ç½—é©¬æ•°å­—\n\n\n\n\n\n\n\nä½¿ç”¨åµŒå¥—å®šä¹‰æ–°çš„æ ‡ç­¾çº§åˆ«ï¼š\n\np123[[2]] <- p123[[2]] + plot_layout(tag_level = \"new\")\np123 + plot_annotation(tag_levels = c(\"I\", \"a\"))\n\n\n\n\n\n\n\n\n1.7.4 å›¾å½¢å åŠ \npatchworkæä¾›äº†inset_element()å‡½æ•°ç”¨äºåœ¨ç»™å®šçš„åŒºåŸŸä¸Šæ”¾ç½®å›¾å½¢ï¼š\n\np1 + inset_element(p2, left = .5, bottom = .4, right = .9, top = .95)\n\n\n\n\n\n\n\n\np24 <- p2 / p4 + plot_layout(guides = \"collect\")\np1 + inset_element(p24, left = .5, right = .9, bottom = .05, top = .9)\n\n\n\n\n\n\n\n\np12 <- p1 + inset_element(p2, left = .5, right = .9, bottom = .5, top = .95)\np12 & theme_bw()\n\n\n\n\n\n\n\n\np12 + plot_annotation(tag_levels = \"A\")\n\n\n\n\n\n\n\næ›´å¤špatchworkçš„åŠŸèƒ½ï¼Œå¯ä»¥æŸ¥çœ‹å®ƒçš„ç½‘ç«™ï¼šhttps://patchwork.data-imaginist.com/ã€‚\n\n\n\n\nHocking, Toby Dylan. 2021. â€œDirectlabels: Direct Labels for Multicolor Plots.â€ https://CRAN.R-project.org/package=directlabels.\n\n\nPebesma, Edzer. 2018. â€œSimple Features for r: Standardized Support for Spatial Vector Dataâ€ 10. https://doi.org/10.32614/RJ-2018-009.\n\n\nâ€”â€”â€”. 2022. â€œStars: Spatiotemporal Arrays, Raster and Vector Data Cubes.â€ https://CRAN.R-project.org/package=stars.\n\n\nPedersen, Thomas Lin. 2020. â€œPatchwork: The Composer of Plots.â€ https://CRAN.R-project.org/package=patchwork.\n\n\nâ€”â€”â€”. 2021a. â€œGgforce: Accelerating â€™Ggplot2â€™.â€ https://CRAN.R-project.org/package=ggforce.\n\n\nâ€”â€”â€”. 2021b. â€œGgraph: An Implementation of Grammar of Graphics for Graphs and Networks.â€ https://CRAN.R-project.org/package=ggraph.\n\n\nâ€”â€”â€”. 2022. â€œTidygraph: A Tidy API for Graph Manipulation.â€ https://CRAN.R-project.org/package=tidygraph.\n\n\nQiu, Yixuan, and authors/contributors of the included software. See file AUTHORS for details. 2022. â€œShowtext: Using Fonts More Easily in r Graphs.â€ https://CRAN.R-project.org/package=showtext.\n\n\nSlowikowski, Kamil. 2021. â€œGgrepel: Automatically Position Non-Overlapping Text Labels with â€™Ggplot2â€™.â€ https://CRAN.R-project.org/package=ggrepel.\n\n\nSparks, Adam H, Mark Padgham, Hugh Parsonage, and Keith Pembleton. 2017. â€œBomrang: Fetch Australian Government Bureau of Meteorology Weather Dataâ€ 2. https://doi.org/10.21105/joss.00411.\n\n\nTeucher, Andy, and Kenton Russell. 2022. â€œRmapshaper: Client for â€™Mapshaperâ€™ for â€™Geospatialâ€™ Operations.â€ https://CRAN.R-project.org/package=rmapshaper.\n\n\nWilke, Claus O. 2020. â€œGgtext: Improved Text Rendering Support for â€™Ggplot2â€™.â€ https://CRAN.R-project.org/package=ggtext.\n\n\nWilkins, David. 2021. â€œGgfittext: Fit Text Inside a Box in â€™Ggplot2â€™.â€ https://CRAN.R-project.org/package=ggfittext.\n\n\nYutani, Hiroaki. 2022. â€œGghighlight: Highlight Lines and Points in â€™Ggplot2â€™.â€ https://CRAN.R-project.org/package=gghighlight."
  },
  {
    "objectID": "vis-ggplot2-scales.html",
    "href": "vis-ggplot2-scales.html",
    "title": "2Â  ggplot2-scales",
    "section": "",
    "text": "å„ä½çœ‹å®¢ï¼š\n\n\n\nLearn-R ä»åœ¨å†™ä½œæµç¨‹ä¸­ã€‚æœ¬ç« èŠ‚æ­£åœ¨è¿›è¡Œå†™ä½œå’Œç»“æ„è°ƒæ•´ï¼Œå¯èƒ½å‡ºç°æ··ä¹±æˆ–ä¸å®Œæ•´çš„æƒ…å†µã€‚\næ ‡åº¦æ§åˆ¶æ•°æ®åˆ°ç¾å­¦çš„æ˜ å°„ï¼Œå®ƒå°†æ•°æ®è½¬ä¸ºå¤§å°ï¼ˆsizeï¼‰ã€é¢œè‰²ï¼ˆcolorï¼‰ã€ä½ç½®ï¼ˆpositionï¼‰æˆ–å½¢çŠ¶ï¼ˆshapeï¼‰ï¼Œå®ƒä¹Ÿæä¾›äº†è§£é‡Šç»˜å›¾çš„å·¥å…·ï¼šåæ ‡è½´å’Œå›¾ä¾‹ã€‚"
  },
  {
    "objectID": "vis-ggplot2-scales.html#ä½ç½®æ ‡åº¦å’Œåæ ‡è½´",
    "href": "vis-ggplot2-scales.html#ä½ç½®æ ‡åº¦å’Œåæ ‡è½´",
    "title": "2Â  ggplot2-scales",
    "section": "\n2.1 ä½ç½®æ ‡åº¦å’Œåæ ‡è½´",
    "text": "2.1 ä½ç½®æ ‡åº¦å’Œåæ ‡è½´\n\n2.1.1 æ•°å€¼å‹\nLimits\nlims()æˆ–limitså‚æ•°å¯ç”¨äºä¿®æ”¹åæ ‡è½´èŒƒå›´ï¼Œéœ€è¦æ¥å—é•¿åº¦ä¸º2çš„æ•°å€¼å‹å‘é‡ã€‚å¦‚æœåªè®¾ç½®å•ä¾§èŒƒå›´ï¼Œå¦ä¸€ä¾§è®¾ç½®ä¸ºNAã€‚\n\nmpg %>% filter(year == 1999) %>% \n  ggplot(aes(displ, hwy)) +\n  geom_point() +\n  scale_x_continuous(limits = c(1, 7)) +\n  scale_y_continuous(limits = c(10, 45))\n\nmpg %>% filter(year == 2008) %>% \n  ggplot(aes(displ, hwy)) +\n  geom_point() +\n  lims(x = c(1, 7), y = c(10, 45))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nZooming in\nå¦‚æœç›®æ ‡æ˜¯æ”¾å¤§ç»˜å›¾çš„ä¸€éƒ¨åˆ†ï¼Œä½¿ç”¨coord_cartesian()çš„xlimå’Œylimå‚æ•°é€šå¸¸ä¼šæ›´å¥½ã€‚\n\nbase <- ggplot(mpg, aes(drv, hwy)) +\n  geom_hline(yintercept = 28, color = \"red\") +\n  geom_boxplot()\n\nbase\nbase + coord_cartesian(ylim = c(10, 35))\nbase + ylim(10, 35)\n#> Warning: Removed 6 rows containing non-finite values (stat_boxplot).\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVisual range expansion\n\nbase <- ggplot(faithfuld, aes(waiting, eruptions)) +\n  geom_raster(aes(fill = density)) +\n  theme(legend.position = \"none\") +\n  labs(x = NULL, y = NULL)\n\nbase\nbase + \n  scale_x_continuous(expand = expansion(0)) +\n  scale_y_continuous(expand = expansion(0))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbase + \n  scale_x_continuous(expand = expansion(add = 3)) +\n  scale_y_continuous(expand = expansion(add = 3))\n\nbase +\n  scale_x_continuous(expand = expansion(mult = .2)) +\n  scale_y_continuous(expand = expansion(mult = .2))\n\nbase +\n  scale_x_continuous(expand = expansion(mult = c(.05, .2))) +\n  scale_y_continuous(expand = c(.05, 0, .2, 0))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\naddå‚æ•°æ˜¯åœ¨ä¸æ•°æ®å˜é‡ç›¸åŒçš„å°ºåº¦ä¸ŠæŒ‡å®šçš„ï¼Œmultå‚æ•°æ˜¯ç›¸å¯¹äºè½´çš„èŒƒå›´æŒ‡å®šçš„ã€‚\nBreaks"
  },
  {
    "objectID": "vis-ggplot2-grammar.html",
    "href": "vis-ggplot2-grammar.html",
    "title": "3Â  ggplot2-grammar",
    "section": "",
    "text": "library(ggplot2)"
  },
  {
    "objectID": "Shiny.html",
    "href": "Shiny.html",
    "title": "Shiny",
    "section": "",
    "text": "å„ä½çœ‹å®¢ï¼š\n\n\n\nLearn-R ä»åœ¨å†™ä½œæµç¨‹ä¸­ã€‚æœ¬ç« èŠ‚ç›®å‰ä¸ºåˆæ­¥æ„æƒ³ï¼Œä¸å»ºè®®é˜…è¯»ã€‚"
  },
  {
    "objectID": "shiny1.html",
    "href": "shiny1.html",
    "title": "\n4Â  Shiny\n",
    "section": "",
    "text": "å„ä½çœ‹å®¢ï¼š\n\n\n\nLearn-R ä»åœ¨å†™ä½œæµç¨‹ä¸­ã€‚æœ¬ç« èŠ‚ç›®å‰ä¸ºåˆæ­¥æ„æƒ³ï¼Œä¸å»ºè®®é˜…è¯»ã€‚"
  },
  {
    "objectID": "Finance.html",
    "href": "Finance.html",
    "title": "Finance",
    "section": "",
    "text": "å„ä½çœ‹å®¢ï¼š\n\n\n\nLearn-R ä»åœ¨å†™ä½œæµç¨‹ä¸­ã€‚æœ¬ç« èŠ‚ç›®å‰ä¸ºåˆæ­¥æ„æƒ³ï¼Œä¸å»ºè®®é˜…è¯»ã€‚"
  },
  {
    "objectID": "fin-tidy.html",
    "href": "fin-tidy.html",
    "title": "\n5Â  Tidy Finance with R\n",
    "section": "",
    "text": "åŸå…ˆçš„ç¬”è®°åœ¨è¿™é‡Œï¼Œä¼šè¿ç§»è¿‡æ¥ã€‚"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Coene, John. 2022. â€œEcharts4r: Create Interactive Graphs with\nâ€™Echarts JavaScriptâ€™ Version 5.â€ https://CRAN.R-project.org/package=echarts4r.\n\n\nHocking, Toby Dylan. 2021. â€œDirectlabels: Direct Labels for\nMulticolor Plots.â€ https://CRAN.R-project.org/package=directlabels.\n\n\nPebesma, Edzer. 2018. â€œSimple Features for r:\nStandardized Support for Spatial Vector Dataâ€ 10. https://doi.org/10.32614/RJ-2018-009.\n\n\nâ€”â€”â€”. 2022. â€œStars: Spatiotemporal Arrays, Raster and Vector Data\nCubes.â€ https://CRAN.R-project.org/package=stars.\n\n\nPedersen, Thomas Lin. 2020. â€œPatchwork: The Composer of\nPlots.â€ https://CRAN.R-project.org/package=patchwork.\n\n\nâ€”â€”â€”. 2021a. â€œGgforce: Accelerating â€™Ggplot2â€™.â€ https://CRAN.R-project.org/package=ggforce.\n\n\nâ€”â€”â€”. 2021b. â€œGgraph: An Implementation of Grammar of Graphics for\nGraphs and Networks.â€ https://CRAN.R-project.org/package=ggraph.\n\n\nâ€”â€”â€”. 2022. â€œTidygraph: A Tidy API for Graph Manipulation.â€\nhttps://CRAN.R-project.org/package=tidygraph.\n\n\nQiu, Yixuan, and authors/contributors of the included software. See file\nAUTHORS for details. 2022. â€œShowtext: Using Fonts More Easily in r\nGraphs.â€ https://CRAN.R-project.org/package=showtext.\n\n\nSlowikowski, Kamil. 2021. â€œGgrepel: Automatically Position\nNon-Overlapping Text Labels with â€™Ggplot2â€™.â€ https://CRAN.R-project.org/package=ggrepel.\n\n\nSparks, Adam H, Mark Padgham, Hugh Parsonage, and Keith Pembleton. 2017.\nâ€œBomrang: Fetch Australian Government\nBureau of Meteorology Weather Dataâ€ 2. https://doi.org/10.21105/joss.00411.\n\n\nTeucher, Andy, and Kenton Russell. 2022. â€œRmapshaper: Client for\nâ€™Mapshaperâ€™ for â€™Geospatialâ€™ Operations.â€ https://CRAN.R-project.org/package=rmapshaper.\n\n\nWickham, Hadley. 2016. â€œGgplot2: Elegant Graphics for Data\nAnalysis.â€ https://ggplot2.tidyverse.org.\n\n\nWickham, Hadley, and Garrett Grolemund. 2017. R for Data\nScience. Oâ€™Reilly Media.\n\n\nWilke, Claus O. 2020. â€œGgtext: Improved Text Rendering Support for\nâ€™Ggplot2â€™.â€ https://CRAN.R-project.org/package=ggtext.\n\n\nWilkins, David. 2021. â€œGgfittext: Fit Text Inside a Box in\nâ€™Ggplot2â€™.â€ https://CRAN.R-project.org/package=ggfittext.\n\n\nYutani, Hiroaki. 2022. â€œGghighlight: Highlight Lines and Points in\nâ€™Ggplot2â€™.â€ https://CRAN.R-project.org/package=gghighlight."
  }
]